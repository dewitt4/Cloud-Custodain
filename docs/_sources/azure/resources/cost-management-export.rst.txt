.. File Generated By c7n-sphinxext from source. Do not edit.

.. _azure.cost-management-export:

azure.cost-management-export
============================

Cost Management Exports for current subscription (doesn't include Resource Group scopes)

:example:

Returns all cost exports for current subscription scope

.. code-block:: yaml

    policies:
      - name: get-cost-management-exports
        resource: azure.cost-management-export

Filters
-------


  - :ref:`event <azure.common.filters.event>`
  
  - :ref:`last-execution <azure.cost-management-export.filters.last-execution>`

  - :ref:`reduce <azure.common.filters.reduce>`
  
  - :ref:`value <azure.common.filters.value>`
  


.. _azure.cost-management-export.filters.last-execution:

last-execution
++++++++++++++
Find Cost Management Exports with last execution more than X days ago.

:example:

Returns all cost exports that didn't run in last 30 days.

.. code-block:: yaml

    policies:
      - name: find-stale-management-exports
        resource: azure.cost-management-export
        filters:
          - type: last-execution
            age: 30

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      age:
        minimum: 0
        type: integer
      type:
        enum:
        - last-execution
    required:
    - age
    - type




Actions
-------


  - :ref:`execute <azure.cost-management-export.actions.execute>`

  - :ref:`logic-app <azure.common.actions.logic-app>`
  
  - :ref:`notify <azure.common.actions.notify>`
  
  - :ref:`webhook <azure.common.actions.webhook>`
  



.. _azure.cost-management-export.actions.execute:

execute
+++++++
Trigger Cost Management Export execution

Known issues:

If you see an error
``Error: (400) A valid email claim is required. Email claim is missing in the request header.``
please ensure used Service Principal has proper email configured.

:example:

Find all exports that have not been executed in the last 30 days and then
trigger a manual export.

.. code-block:: yaml

    policies:
      - name: execute-stale-management-exports
        resource: azure.cost-management-export
        filters:
          - type: last-execution
            age: 30
        actions:
          - type: execute

.. container:: toggle

  

  .. raw:: html
     
    <div class="header docutils container" style=""></div>

  .. code-block:: yaml

    properties:
      type:
        enum:
        - execute
    required:
    - type

